!function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=10)}([function(e,t){e.exports=React},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(26);class i{constructor(){this.subscriptions=[]}static create(){return new i}static createWith1Argument(){return new i}static createWith2Arguments(){return new i}addSubscription(e,t){const s=new r.ObservableSubscription(e,t);this.subscriptions.push(s)}removeSubscription(e){this.subscriptions=this.subscriptions.filter(t=>t.observer!==e)}notify(...e){this.subscriptions.forEach(t=>t.callback.apply(t.observer,e))}}t.ObservableFactory=i},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",r=e[3];if(!r)return s;if(t&&"function"==typeof btoa){var i=(n=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(u," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")}));return[s].concat(o).concat([i]).join("\n")}var n,a,u;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(s,"}"):s})).join("")},t.i=function(e,s){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var n=0;n<e.length;n++){var a=e[n];null!=a[0]&&r[a[0]]||(s&&!a[2]?a[2]=s:s&&(a[2]="(".concat(a[2],") and (").concat(s,")")),t.push(a))}},t}},function(e,t,s){"use strict";var r,i={},o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},n=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}();function a(e,t){for(var s=[],r={},i=0;i<e.length;i++){var o=e[i],n=t.base?o[0]+t.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};r[n]?r[n].parts.push(a):s.push(r[n]={id:n,parts:[a]})}return s}function u(e,t){for(var s=0;s<e.length;s++){var r=e[s],o=i[r.id],n=0;if(o){for(o.refs++;n<o.parts.length;n++)o.parts[n](r.parts[n]);for(;n<r.parts.length;n++)o.parts.push(g(r.parts[n],t))}else{for(var a=[];n<r.parts.length;n++)a.push(g(r.parts[n],t));i[r.id]={id:r.id,refs:1,parts:a}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=s.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(s){t.setAttribute(s,e.attributes[s])})),"function"==typeof e.insert)e.insert(t);else{var i=n(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,s,r){var i=s?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(o,n[t]):e.appendChild(o)}}function m(e,t,s){var r=s.css,i=s.media,o=s.sourceMap;if(i&&e.setAttribute("media",i),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var h=null,f=0;function g(e,t){var s,r,i;if(t.singleton){var o=f++;s=h||(h=c(t)),r=p.bind(null,s,o,!1),i=p.bind(null,s,o,!0)}else s=c(t),r=m.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=o());var s=a(e,t);return u(s,t),function(e){for(var r=[],o=0;o<s.length;o++){var n=s[o],c=i[n.id];c&&(c.refs--,r.push(c))}e&&u(a(e,t),t);for(var l=0;l<r.length;l++){var d=r[l];if(0===d.refs){for(var p=0;p<d.parts.length;p++)d.parts[p]();delete i[d.id]}}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1);class i{constructor(e,t){this.amount=t,this.key=e}}t.ValueContainer=class{constructor(e){this.additiveModifiers=[],this.multiplicativeModifiers=[],this.value=0,this.onValueChange=r.ObservableFactory.createWith1Argument(),void 0!==e&&this.setAdditiveModifier(this,e)}recalculateValue(){let e=0;this.additiveModifiers.forEach(t=>e+=t.amount),this.multiplicativeModifiers.forEach(t=>e*=t.amount),this.value!==e&&(this.value=e,this.onValueChange.notify(e))}setAdditiveModifier(e,t){const s=this.additiveModifiers.find(t=>t.key===e);if(s)s.amount=t;else{const s=new i(e,t);this.additiveModifiers.push(s)}this.recalculateValue()}setMultiplicativeModifier(e,t){const s=this.multiplicativeModifiers.find(t=>t.key===e);if(s)s.amount=t;else{const s=new i(e,t);this.multiplicativeModifiers.push(s)}this.recalculateValue()}removeAllModifiers(e){this.additiveModifiers=this.additiveModifiers.filter(t=>t.key!==e),this.multiplicativeModifiers=this.multiplicativeModifiers.filter(t=>t.key!==e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1);t.GameSystem=class{constructor(){this._isUnlocked=!1,this.onUnlocked=r.ObservableFactory.create()}get isUnlocked(){return this._isUnlocked}set isUnlocked(e){this._isUnlocked!==e&&(this._isUnlocked=e,e&&this.onUnlocked.notify())}update(e){}init(){}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Devotion=0]="Devotion",e[e.Food=1]="Food",e[e.Gold=2]="Gold",e[e.Pelt=3]="Pelt",e[e.Stone=4]="Stone",e[e.Wood=5]="Wood"}(t.ResourceType||(t.ResourceType={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.resourceType=e,this.value=t}static fromArray(...e){return e.map(e=>new r(e[0],e[1]))}}t.ResourceValue=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);t.GameContext=r.createContext(null)},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static Format(e,t,s,i){void 0===t&&(t=2),void 0===s&&(s=t),void 0===i&&(i=!1);let o=0;for(;e>1e4;)e/=1e3,o++;const n=Math.pow(10,t);let a,u;i?(e-=1e-4,a=Math.ceil(e*n)/n):(e+=1e-4,a=Math.floor(e*n)/n),u=s?a.toFixed(s):a.toString();const c=r.postfixes[o];return c&&(u+=c),u}}t.NumberFormatter=r,r.postfixes=["","k","m","b"]},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(11);s(12),s(14),s(16),s(18),s(20),s(22);const o=s(24);i.render(r.createElement(o.UIGame,null),document.getElementById("game-container"))},function(e,t){e.exports=ReactDOM},function(e,t,s){var r=s(13);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};s(3)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,s){(e.exports=s(2)(!1)).push([e.i,".flexbox{display:flex}.flexbox-between{display:flex;justify-content:space-between}.flexbox-column{display:flex;flex-direction:column}.flexbox-column-between{display:flex;flex-direction:column;justify-content:space-between}.button{background-color:#99b;border:2px solid grey;display:inline-block;padding-left:15px;padding-right:15px;cursor:pointer}.large-list-card{background-color:#b95;border:2px solid grey;min-height:150px;width:600px;margin-bottom:5px}.progress-bar{width:100%;height:10px;background-color:#141414;border:1px solid grey}.progress-bar .bar{height:100%;background-color:#99b;display:block}\n",""])},function(e,t,s){var r=s(15);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};s(3)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,s){(e.exports=s(2)(!1)).push([e.i,"body{background-color:#141414;color:#f2f2f2;user-select:none}#header{width:100%;height:50px;background-color:#303030;display:flex;justify-content:space-between;padding:5px}#header .title-container{display:flex;flex-direction:column}#header .title-container .title{font-size:25px}#header .title-container .version-number{font-size:10px}#header .btn-new-game{padding-top:8px}#body{display:flex;justify-content:space-between;padding:10px}#tabs-and-tab-content-container{display:flex}\n",""])},function(e,t,s){var r=s(17);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};s(3)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,s){(e.exports=s(2)(!1)).push([e.i,".building{display:flex}.building .name-and-image-container{display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;padding:5px;width:150px}.building .name{font-size:20px}.building .description-container{display:flex;flex-direction:column;justify-content:space-around;padding:5px;width:250px}.building .resources{width:200px;margin:5px;padding:10px;display:flex;flex-direction:column;justify-content:space-around}.building .resources .resource{display:flex;justify-content:space-between;font-weight:800}\n",""])},function(e,t,s){var r=s(19);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};s(3)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,s){(e.exports=s(2)(!1)).push([e.i,"#tabs .tab.selected{border:2px solid grey}#tabs .tab{border:2px solid #555555;display:flex;flex-direction:column;padding:10px;margin-bottom:5px;background-color:#b95;align-items:center}\n",""])},function(e,t,s){var r=s(21);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};s(3)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,s){(e.exports=s(2)(!1)).push([e.i,"#resources{width:300px}#resources>li{display:flex;justify-content:space-between}\n",""])},function(e,t,s){var r=s(23);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};s(3)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,s){(e.exports=s(2)(!1)).push([e.i,"#worker-system .job{display:flex;padding:10px}#worker-system .job .name-and-image-container{width:100px;height:100px;display:flex;flex-direction:column;align-items:center}#worker-system .job .description-and-slider-container{flex:1 1 auto;display:flex;align-items:center}#worker-system .job .description{flex:1 1 0}#worker-system .job .slider{flex:1 1 0}\n",""])},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(25),o=s(8),n=s(36),a=s(37);class u extends r.Component{constructor(e){super(e),this.state={game:null}}newGame(){const e=i.Game.new();e.buildingSystem.onUnlocked.addSubscription(this,()=>this.forceUpdate()),this.setState({game:e})}render(){return r.createElement("div",null,r.createElement(n.UIHeader,{versionNumber:"0.0.2",onNewGameClick:()=>this.newGame()}),this.state.game?r.createElement(o.GameContext.Provider,{value:this.state.game},r.createElement(a.UIBody,{game:this.state.game})):null)}}t.UIGame=u},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),i=s(27),o=s(29),n=s(32);class a{constructor(){this.updateFrequency=100,this.maxTimeToResumePerUpdate=864e5,this.lastUpdateAsNumber=Date.now(),this.onUpdate=r.ObservableFactory.create()}static new(){const e=new a;return e.init(),e.startNewGame(),e}init(){this.buildingSystem=new n.BuildingSystem(this),this.buildingSystem.init(),this.resourceSystem=new i.ResourceSystem,this.resourceSystem.init(),this.workerSystem=new o.WorkerSystem(this),this.workerSystem.init()}startNewGame(){this.startTimeAsNumber=Date.now(),this.workerSystem.newGame(),this.refreshSystemsIsUnlocked(),this.resourceSystem.refreshResourcesIsUnlocked(),this.beginUpdating()}beginUpdating(){this.updateIntervalID=setInterval(()=>{this.update()},this.updateFrequency)}update(){let e=Date.now()-this.lastUpdateAsNumber;for(e>this.maxTimeToResumePerUpdate&&(e=this.maxTimeToResumePerUpdate,this.lastUpdateAsNumber=Date.now()-this.maxTimeToResumePerUpdate);e>this.updateFrequency;)e-=this.updateFrequency,this.lastUpdateAsNumber=this.lastUpdateAsNumber+this.updateFrequency,this.updateGameSystems(this.updateFrequency);this.onUpdate.notify()}updateGameSystems(e){this.resourceSystem.update(e),this.buildingSystem.update(e)}refreshSystemsIsUnlocked(){this.workerSystem.isUnlocked=!0,this.resourceSystem.isUnlocked=!0,this.buildingSystem.isUnlocked=this.workerSystem.totalWorkerCount.value>1||0===this.workerSystem.idleWorkerCount}}t.Game=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ObservableSubscription=class{constructor(e,t){this.observer=e,this.callback=t}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5),i=s(28),o=s(6);class n extends r.GameSystem{constructor(){super(...arguments),this.name="Resources",this.resources=[],this.resourceMap=new Map,this.resourceCaps=[]}addResourceType(e,t,s){this.resources.push(new i.Resource(e,t,s))}init(){this.addResourceType("Food",o.ResourceType.Food,500),this.addResourceType("Wood",o.ResourceType.Wood,500),this.addResourceType("Stone",o.ResourceType.Stone,100),this.addResourceType("Pelt",o.ResourceType.Pelt,100),this.addResourceType("Gold",o.ResourceType.Gold,100),this.addResourceType("Devotion",o.ResourceType.Devotion),this.resources.forEach(e=>this.resourceMap.set(e.type,e))}getResource(e){return this.resourceMap.get(e)}update(e){this.resources.forEach(t=>{const s=t.income.value*e/1e3;t.amount+=s,t.respectCap()})}hasResources(e){return e.every(e=>{return this.getResource(e.resourceType).amount>=e.value})}payResources(e){return e.forEach(e=>{this.getResource(e.resourceType).amount-=e.value})}refreshResourcesIsUnlocked(){this.resourceMap.get(o.ResourceType.Food).isUnlocked=!0,this.resourceMap.get(o.ResourceType.Wood).isUnlocked=!0}}t.ResourceSystem=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(4),i=s(1);t.Resource=class{constructor(e,t,s){this._isUnlocked=!1,this.onUnlocked=i.ObservableFactory.create(),this.amount=0,this.income=new r.ValueContainer,this.cap=new r.ValueContainer,this.name=e,this.type=t,void 0===s?this.hasCap=!1:(this.hasCap=!0,this.cap.setAdditiveModifier(this,s))}get isUnlocked(){return this._isUnlocked}set isUnlocked(e){this._isUnlocked!==e&&(this._isUnlocked=e,e&&this.onUnlocked.notify())}respectCap(){this.hasCap&&this.amount>this.cap.value&&(this.amount=this.cap.value)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5),i=s(1),o=s(30),n=s(6),a=s(4);class u extends r.GameSystem{constructor(e){super(),this.name="Workers",this.game=e}init(){this.totalWorkerCount=new a.ValueContainer,this.totalWorkerCount.setAdditiveModifier(this,1),this.totalWorkerCount.onValueChange.addSubscription(this,e=>this.recalculateIdleWorkerCount()),this.gathererJob=new o.ResourceJob("Gatherer","Search nearby forests for berries and shrooms",.5,n.ResourceType.Food),this.woodcutterJob=new o.ResourceJob("Woodcutter","Chop down trees for wood",25,n.ResourceType.Wood),this.resourceJobs=[this.gathererJob,this.woodcutterJob],this.jobs=[...this.resourceJobs],this.resourceJobs.forEach(e=>{const t=this.game.resourceSystem.getResource(e.resourceType);e.onWorkerCountChange.addSubscription(this,s=>{const r=s*e.value.value;t.income.setAdditiveModifier(e,r)})}),this.onIdleWorkerCountChange=i.ObservableFactory.createWith1Argument()}newGame(){this.recalculateIdleWorkerCount()}recalculateIdleWorkerCount(){let e=this.totalWorkerCount.value;this.jobs.forEach(t=>e-=t.workerCount),this.idleWorkerCount!==e&&(this.idleWorkerCount=e,this.onIdleWorkerCountChange.notify(this.idleWorkerCount))}setWorkerCountOnJob(e,t){const s=t-e.workerCount;if(s>0){if(!(this.idleWorkerCount>=s))throw`Cannot assign ${s} workers - only ${this.idleWorkerCount} workers available.`;e.workerCount+=s}else{if(!(t>=0))throw"Cannot assign a negative amount of workers to a job";e.workerCount+=s}this.game.buildingSystem.isUnlocked=!0,this.recalculateIdleWorkerCount()}}t.WorkerSystem=u},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(31);class i extends r.Job{constructor(e,t,s,r){super(e,t,s),this.resourceType=r}}t.ResourceJob=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(4),i=s(1);t.Job=class{constructor(e,t,s){this._workerCount=0,this.name=e,this.description=t,this.value=new r.ValueContainer,this.value.setAdditiveModifier(this,s),this.onWorkerCountChange=i.ObservableFactory.createWith1Argument()}get workerCount(){return this._workerCount}set workerCount(e){this._workerCount=e,this.onWorkerCountChange.notify(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(5),i=s(33),o=s(6),n=s(7);class a extends r.GameSystem{constructor(e){super(),this.name="Buildings",this.buildings=[],this.game=e}addBuilding(e,t,s,r,o,n,a,u,c){this.buildings.push(new i.Building(e,t,s,r,o,n,a,u,c))}init(){this.addBuilding("Hut","Allows another worker to join your village",n.ResourceValue.fromArray([o.ResourceType.Wood,100]),n.ResourceValue.fromArray([o.ResourceType.Wood,20]),n.ResourceValue.fromArray([o.ResourceType.Wood,1.2]),1e3,500,null,e=>{this.game.workerSystem.totalWorkerCount.setAdditiveModifier(e,e.amount)}),this.addBuilding("Shed","Increases the storage",n.ResourceValue.fromArray([o.ResourceType.Wood,300]),n.ResourceValue.fromArray([o.ResourceType.Wood,50]),n.ResourceValue.fromArray(),1e3,500,null,e=>{n.ResourceValue.fromArray([o.ResourceType.Food,50],[o.ResourceType.Wood,100]).forEach(t=>this.game.resourceSystem.getResource(t.resourceType).cap.setAdditiveModifier(e,e.amount*t.value))})}buyBuilding(e){const t=e.costOfNext.getAllAsResourceValues();this.game.resourceSystem.hasResources(t)&&(this.game.resourceSystem.payResources(t),e.startBuilding())}update(e){this.buildings.forEach(t=>{t.isBuildingNext&&(t.buildTimeRemaining-=e,t.buildTimeRemaining<=0&&t.finishBuilding())})}}t.BuildingSystem=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),i=s(34),o=s(4);t.Building=class{constructor(e,t,s,n,a,u,c,l,d){this.isBuildingNext=!1,this.amount=0,this.name=e,this.description=t,this.costOfNext=new i.ResourceValueContainerSet(s),this.timeToBuildNext=new o.ValueContainer(u),this.additiveCostPerBuilding=n,this.multiplicativeCostPerBuilding=a,this.additiveTimeToBuildPerBuilding=c,this.multiplicativeTimeToBuildPerBuilding=l,this.onUpdateAmount=r.ObservableFactory.createWith1Argument(),this.onUpdateAmount.addSubscription(this,d),this.onBuildingStarted=r.ObservableFactory.createWith1Argument()}refreshNextBuilding(){this.refreshCostOfNextBuilding(),this.refreshTimeToBuildNextBuilding()}refreshCostOfNextBuilding(){this.additiveCostPerBuilding.forEach(e=>{const t=e.value*this.amount;this.costOfNext.setAdditiveModifier(this,e.resourceType,t)}),this.multiplicativeCostPerBuilding.forEach(e=>{const t=Math.pow(e.value,this.amount);this.costOfNext.setMultiplicativeModifier(this,e.resourceType,t)})}refreshTimeToBuildNextBuilding(){if(this.additiveTimeToBuildPerBuilding){const e=this.additiveTimeToBuildPerBuilding*this.amount;this.timeToBuildNext.setAdditiveModifier(this,e)}if(this.multiplicativeTimeToBuildPerBuilding){const e=Math.pow(this.multiplicativeTimeToBuildPerBuilding,this.amount);this.timeToBuildNext.setMultiplicativeModifier(this,e)}}startBuilding(){this.isBuildingNext=!0,this.buildTimeRemaining=this.timeToBuildNext.value,this.onBuildingStarted.notify(this)}finishBuilding(){this.amount++,this.isBuildingNext=!1,this.refreshNextBuilding(),this.onUpdateAmount.notify(this)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(35),i=s(7);t.ResourceValueContainerSet=class{constructor(e){this.resourceValueContainers=e.map(e=>new r.ResourceValueContainer(e.resourceType,e.value)),this.resourceValueContainerMap=new Map,this.resourceValueContainers.forEach(e=>this.resourceValueContainerMap.set(e.resourceType,e))}findOrCreateResourceValueContainer(e){let t=this.resourceValueContainerMap.get(e);return t||(t=new r.ResourceValueContainer(e),this.resourceValueContainers.push(t),this.resourceValueContainerMap.set(e,t)),t}setAdditiveModifier(e,t,s){this.findOrCreateResourceValueContainer(t).value.setAdditiveModifier(e,s)}setMultiplicativeModifier(e,t,s){this.findOrCreateResourceValueContainer(t).value.setMultiplicativeModifier(e,s)}getAll(){return this.resourceValueContainers}getAllAsMap(){return this.resourceValueContainerMap}getAllAsResourceValues(){return this.resourceValueContainers.map(e=>new i.ResourceValue(e.resourceType,e.value.value))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(4);t.ResourceValueContainer=class{constructor(e,t){this.resourceType=e,this.value=new r.ValueContainer(t)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);class i extends r.Component{render(){return r.createElement("div",{id:"header"},r.createElement("span",{className:"title-container"},r.createElement("span",{className:"title"},"Quiet Village"),r.createElement("span",{className:"version-number"},"v",this.props.versionNumber)),r.createElement("span",{className:"button btn-new-game",onClick:this.props.onNewGameClick},"New game"))}}t.UIHeader=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(38),o=s(40),n=s(44),a=s(46);class u extends r.Component{renderGameSystem(){if(!this.state||!this.state.selectedGameSystem||!this.state.selectedGameSystem.isUnlocked)return null;switch(this.state.selectedGameSystem){case this.props.game.buildingSystem:return r.createElement(o.UIBuildings,{game:this.props.game});case this.props.game.workerSystem:return r.createElement(i.UIWorkerSystem,{game:this.props.game});default:return null}}render(){return r.createElement("div",{id:"body"},r.createElement("span",{id:"tabs-and-tab-content-container"},r.createElement(a.UIGameSystemTabs,{game:this.props.game,onSelected:e=>this.setState({selectedGameSystem:e})}),r.createElement("span",{id:"tab-content"},this.renderGameSystem())),r.createElement(n.UIResources,{game:this.props.game}))}}t.UIBody=u},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(39);class o extends r.Component{constructor(e){super(e),this.state={idleWorkerCount:this.props.game.workerSystem.idleWorkerCount},this.props.game.workerSystem.onIdleWorkerCountChange.addSubscription(this,e=>{this.setState({idleWorkerCount:e})})}render(){return r.createElement("div",{id:"worker-system"},r.createElement("div",{className:"job large-list-card"},r.createElement("span",{className:"name-and-image-container"},r.createElement("span",null,"Idle(",this.state.idleWorkerCount,")"),r.createElement("img",{src:"./img/worker/jobs/idle.png"})),r.createElement("span",{className:"description-and-slider-container"},r.createElement("span",null,"Idle workers do not help the village in any way - Put them to work!"))),r.createElement("ul",null,this.props.game.workerSystem.jobs.map(e=>r.createElement(i.UIJob,{key:e.name,game:this.props.game,job:e}))))}}t.UIWorkerSystem=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);class i extends r.Component{constructor(e){super(e),this.state={workerCount:this.props.job.workerCount,totalWorkerCount:this.props.game.workerSystem.totalWorkerCount.value},this.props.job.onWorkerCountChange.addSubscription(this,e=>this.setState({workerCount:e})),this.props.game.workerSystem.totalWorkerCount.onValueChange.addSubscription(this,e=>this.setState({totalWorkerCount:e}))}setWorkers(e){const t=this.props.job.workerCount+this.props.game.workerSystem.idleWorkerCount;t>=e?this.props.game.workerSystem.setWorkerCountOnJob(this.props.job,e):this.props.game.workerSystem.setWorkerCountOnJob(this.props.job,t)}render(){return r.createElement("li",{key:this.props.job.name},r.createElement("div",{className:"job large-list-card"},r.createElement("span",{className:"name-and-image-container"},r.createElement("span",null,this.props.job.name,"(",this.state.workerCount,")"),r.createElement("img",{src:`./img/worker/jobs/${this.props.job.name.toLowerCase()}.png`})),r.createElement("span",{className:"description-and-slider-container"},r.createElement("span",{className:"description"},this.props.job.description),r.createElement("input",{className:"slider",type:"range",min:"0",max:this.state.totalWorkerCount,step:"1",value:this.state.workerCount,onChange:e=>this.setWorkers(Number(e.target.value))}))))}}t.UIJob=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(41);class o extends r.Component{constructor(e){super(e)}render(){return r.createElement("ul",null,this.props.game.buildingSystem.buildings.map(e=>r.createElement(i.UIBuilding,{key:e.name,game:this.props.game,building:e})))}}t.UIBuildings=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(42),o=s(43);class n extends r.Component{constructor(e){super(e),this.props.building.onUpdateAmount.addSubscription(this,e=>this.forceUpdate()),this.props.game.onUpdate.addSubscription(this,()=>this.forceUpdate())}buy(){this.props.game.buildingSystem.buyBuilding(this.props.building)}getAmountText(){return this.props.building.amount>0?"("+this.props.building.amount+")":""}render(){return r.createElement("li",{key:this.props.building.name,className:"building large-list-card"},r.createElement("span",{className:"name-and-image-container"},r.createElement("span",{className:"name"},this.props.building.name+this.getAmountText()),r.createElement("img",{src:`./img/buildings/${this.props.building.name.toLocaleLowerCase()}.png`})),r.createElement("span",{className:"description-container"},this.props.building.isBuildingNext&&r.createElement(o.UIProgressBar,{min:0,max:this.props.building.timeToBuildNext.value,current:this.props.building.buildTimeRemaining}),r.createElement("span",{className:"description"},this.props.building.description)),r.createElement(i.UIBuildingCost,{onClick:()=>this.buy(),building:this.props.building}))}}t.UIBuilding=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(8),o=s(9);class n extends r.Component{constructor(e){super(e),this.props.building.onUpdateAmount.addSubscription(this,e=>this.forceUpdate())}render(){return r.createElement(i.GameContext.Consumer,null,e=>r.createElement("ul",{className:"resources button",onClick:this.props.onClick},this.props.building.costOfNext.getAll().map(t=>r.createElement("li",{className:"resource",key:t.resourceType},r.createElement("span",{className:"type"},e.resourceSystem.getResource(t.resourceType).name),r.createElement("span",{className:"value"},o.NumberFormatter.Format(t.value.value,0,0,!0))))))}}t.UIBuildingCost=n},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);class i extends r.Component{getFillPercentage(){return 100*(this.props.max-this.props.current)/(this.props.max-this.props.min)}render(){return r.createElement("span",{className:"progress-bar"},r.createElement("span",{className:"bar",style:{width:this.getFillPercentage()+"%"}}))}}t.UIProgressBar=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(45);class o extends r.Component{constructor(e){super(e);const t=()=>this.props.game.resourceSystem.resources.filter(e=>e.isUnlocked);this.state={resources:t()},this.props.game.onUpdate.addSubscription(this,()=>this.setState({resources:t()}))}render(){return r.createElement("ul",{id:"resources"},this.state.resources.map(e=>r.createElement(i.UIResource,{key:e.name,resource:e})))}}t.UIResources=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(9);class o extends r.Component{render(){return r.createElement("li",{className:"resource-line"},r.createElement("span",null,r.createElement("span",{className:"name"},this.props.resource.name),r.createElement("span",{className:"increase-per-second"},"(",i.NumberFormatter.Format(this.props.resource.income.value,2,2),"/s)")),r.createElement("span",null,r.createElement("span",{className:"amount"},i.NumberFormatter.Format(this.props.resource.amount,2,2)),this.props.resource.hasCap?r.createElement("span",null," / ",i.NumberFormatter.Format(this.props.resource.cap.value,2,2)):null))}}t.UIResource=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),i=s(47);class o extends r.Component{constructor(e){super(e),this.allGameSystems=[e.game.workerSystem,e.game.buildingSystem],this.allGameSystems.forEach(e=>e.onUnlocked.addSubscription(this,()=>this.updateGameSystems())),this.gameSystems=this.getUnlockedGameSystems()}getUnlockedGameSystems(){return this.allGameSystems.filter(e=>e.isUnlocked)}updateGameSystems(){this.gameSystems=this.allGameSystems.filter(e=>e.isUnlocked),this.forceUpdate()}selectGameSystem(e){this.selectedGameSystem=e,this.props.onSelected(e),this.forceUpdate()}componentDidMount(){this.selectGameSystem(this.props.game.workerSystem)}render(){return r.createElement("ul",{id:"tabs"},this.gameSystems.map(e=>r.createElement(i.UIGameSystemTab,{key:e.name,gameSystem:e,isSelected:e===this.selectedGameSystem,onSelected:()=>this.selectGameSystem(e)})))}}t.UIGameSystemTabs=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);class i extends r.Component{render(){return r.createElement("li",{className:`tab ${this.props.isSelected?"selected":""}`,onClick:this.props.onSelected},r.createElement("img",{src:`./img/tabs/${this.props.gameSystem.name.toLocaleLowerCase()}.png`}),r.createElement("span",null,this.props.gameSystem.name))}}t.UIGameSystemTab=i}]);
//# sourceMappingURL=main.js.map